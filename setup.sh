#!/usr/bin/env bash
set -e
# Dependencies:
if [[ $(uname) == "Linux" ]]; then
    sudo apt install -y cmake python3
elif [[ $(uname) == "Darwin" ]]; then
    brew install python3 gcc cmake
fi

# Python Virtual Environment
if [[ ! -d "$env" ]]; then
    python3 -m venv env
fi
source env/bin/activate
pip install --upgrade pip
pip install -r "requirements.txt"
deactivate
base64 -d <<< "ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICMjIyMjIyMjICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICMjIyAgICAuIyMjIy4gICAgICAgIyMjICAKICMjIyMjIyMjICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOiMjIyAgICAjIyMjIyMgICAgICA6IyMjICAKICMjICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuIyMjIyAgIDojIyAgIyM6ICAgIC4jIyMjICAKICMjICAgICAgICAgIyMuIyMjIyAgICMjLiMjIyMgICAuIyMjIy4gICAgIyMuIyMjIyAgICAjIy4jIyAgICMjOiAgOiMjICAgICMjLiMjICAKICMjICAgICAgICAgIyMjIyMjIyAgICMjIyMjIyMgIC4jIyMjIyMuICAgIyMjIyMjIyAgIDojOiAjIyAgICMjICAgICMjICAgOiM6ICMjICAKICMjIyMjIyMgICAgIyMjLiAgICAgICMjIy4gICAgICMjIyAgIyMjICAgIyMjLiAgICAgLiMjICAjIyAgICMjICMjICMjICAuIyMgICMjICAKICMjIyMjIyMgICAgIyMgICAgICAgICMjICAgICAgICMjLiAgLiMjICAgIyMgICAgICAgIyMgICAjIyAgICMjICMjICMjICAjIyAgICMjICAKICMjICAgICAgICAgIyMgICAgICAgICMjICAgICAgICMjICAgICMjICAgIyMgICAgICAgIyMjIyMjIyMgICMjICAgICMjICAjIyMjIyMjIyAKICMjICAgICAgICAgIyMgICAgICAgICMjICAgICAgICMjLiAgLiMjICAgIyMgICAgICAgIyMjIyMjIyMgICMjOiAgOiMjICAjIyMjIyMjIyAKICMjICAgICAgICAgIyMgICAgICAgICMjICAgICAgICMjIyAgIyMjICAgIyMgICAgICAgICAgICAjIyAgIDojIyAgIyM6ICAgICAgICMjICAKICMjIyMjIyMjICAgIyMgICAgICAgICMjICAgICAgIC4jIyMjIyMuICAgIyMgICAgICAgICAgICAjIyAgICAjIyMjIyMgICAgICAgICMjICAKICMjIyMjIyMjICAgIyMgICAgICAgICMjICAgICAgICAuIyMjIy4gICAgIyMgICAgICAgICAgICAjIyAgICAuIyMjIy4gICAgICAgICMjICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAK
"
./build/build.sh Release
